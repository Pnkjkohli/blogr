<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile Page</title>

    <!-- Custom Css -->
    <link rel="stylesheet" href="./style-dashboard.css">
    <link rel="stylesheet" href="style-profile.css">

    <!-- FontAwesome 5 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.12/cropper.min.css" rel="stylesheet">

</head>

<body>

    <div class="profile-dashboard">
        <aside class="search-wrap">
            <div class="search">
                <label for="search">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                        <path
                            d="M10 18a7.952 7.952 0 0 0 4.897-1.688l4.396 4.396 1.414-1.414-4.396-4.396A7.952 7.952 0 0 0 18 10c0-4.411-3.589-8-8-8s-8 3.589-8 8 3.589 8 8 8zm0-14c3.309 0 6 2.691 6 6s-2.691 6-6 6-6-2.691-6-6 2.691-6 6-6z" />
                    </svg>
                    <input type="text" id="search">
                </label>
            </div>

            <div class="user-actions">
                <button>
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                        <path
                            d="M13.094 2.085l-1.013-.082a1.082 1.082 0 0 0-.161 0l-1.063.087C6.948 2.652 4 6.053 4 10v3.838l-.948 2.846A1 1 0 0 0 4 18h4.5c0 1.93 1.57 3.5 3.5 3.5s3.5-1.57 3.5-3.5H20a1 1 0 0 0 .889-1.495L20 13.838V10c0-3.94-2.942-7.34-6.906-7.915zM12 19.5c-.841 0-1.5-.659-1.5-1.5h3c0 .841-.659 1.5-1.5 1.5zM5.388 16l.561-1.684A1.03 1.03 0 0 0 6 14v-4c0-2.959 2.211-5.509 5.08-5.923l.921-.074.868.068C15.794 4.497 18 7.046 18 10v4c0 .107.018.214.052.316l.56 1.684H5.388z" />
                    </svg>
                </button>
                <button>
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                        <path
                            d="M12 21c4.411 0 8-3.589 8-8 0-3.35-2.072-6.221-5-7.411v2.223A6 6 0 0 1 18 13c0 3.309-2.691 6-6 6s-6-2.691-6-6a5.999 5.999 0 0 1 3-5.188V5.589C6.072 6.779 4 9.65 4 13c0 4.411 3.589 8 8 8z" />
                        <path d="M11 2h2v10h-2z" />
                    </svg>
                </button>
            </div>
        </aside>

        <div include-html="partial-dashboard.html" id="partial-dashboard_file"></div>

        <!-- Main -->
        <div class="main">
            <h2>IDENTITY</h2>
            <div class="card">
                <div class="card-body">
                    <i class="fa fa-pen fa-xs edit"></i>


                    <div id="myData"></div>
                </div>


                <div id="image-container">
                    <input type="file" id="image-input" accept="image/*" />
                    <div>
                        <img id="preview" src="" />
                    </div>
                </div>
            
                <div>
                    <button id="crop-btn">Save Image</button>
                </div>
            
                <div id="cropped-result">
                    <h3>Profile Image</h3>
                    <img id="cropped-image" src="" />
                </div>
               

                

            </div>

         


            <!-- <h2>SOCIAL MEDIA</h2>
            <div class="card">
                <div class="card-body">
                    <i class="fa fa-pen fa-xs edit"></i>
                    <div class="social-media">
                        <span class="fa-stack fa-sm">
                            <i class="fas fa-circle fa-stack-2x"></i>
                            <i class="fab fa-facebook fa-stack-1x fa-inverse"></i>
                        </span>
                        <span class="fa-stack fa-sm">
                            <i class="fas fa-circle fa-stack-2x"></i>
                            <i class="fab fa-twitter fa-stack-1x fa-inverse"></i>
                        </span>
                        <span class="fa-stack fa-sm">
                            <i class="fas fa-circle fa-stack-2x"></i>
                            <i class="fab fa-instagram fa-stack-1x fa-inverse"></i>
                        </span>
                        <span class="fa-stack fa-sm">
                            <i class="fas fa-circle fa-stack-2x"></i>
                            <i class="fab fa-invision fa-stack-1x fa-inverse"></i>
                        </span>
                        <span class="fa-stack fa-sm">
                            <i class="fas fa-circle fa-stack-2x"></i>
                            <i class="fab fa-github fa-stack-1x fa-inverse"></i>
                        </span>
                        <span class="fa-stack fa-sm">
                            <i class="fas fa-circle fa-stack-2x"></i>
                            <i class="fab fa-whatsapp fa-stack-1x fa-inverse"></i>
                        </span>
                        <span class="fa-stack fa-sm">
                            <i class="fas fa-circle fa-stack-2x"></i>
                            <i class="fab fa-snapchat fa-stack-1x fa-inverse"></i>
                        </span>
                    </div>
                </div>
            </div> -->
        </div>
        <!-- End -->



    </div>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="include-html.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.12/cropper.min.js"></script>

    <script>

        document.addEventListener('DOMContentLoaded', function () {

            const username = localStorage.getItem('username');
            const email = localStorage.getItem('email');
            const password = localStorage.getItem('password');


            if (username && email && password) {

                document.getElementById('myData').innerHTML = `
            <p>Username: ${username}</p>
            <p>Email: ${email}</p>
            <p>Password: ${password}</p>
        `;
            } else {
                document.getElementById('myData').innerHTML = '<p>No data found in localStorage.</p>';
            }
        });


        let cropper;

        document.getElementById('image-input').addEventListener('change', function (e) {
            const file = e.target.files[0];
           
           
            const reader = new FileReader();
          

            reader.onload = function (event) {
                const imageUrl = event.target.result;
             

                const image = document.getElementById('preview');
               
                image.src = imageUrl;

                // Initialize Cropper.js when the image is loaded
                image.onload = function () {
                   
                    if (cropper) {
                      
                        cropper.destroy();  // Destroy previous instance if any
                    }
                    cropper = new Cropper(image, {
                        aspectRatio: 16 / 9,
                        viewMode: 1,
                        autoCropArea: 0.8,
                        responsive: true,
                        checkOrientation: false,
                        autoCrop: true,
                      
                    });
                };
            };

            if (file) {
              
                // console.log(readAsDataURL)

                reader.readAsDataURL(file);
            }
        });

        document.getElementById('crop-btn').addEventListener('click', function () {
            if (cropper) {
              
             
                const canvas = cropper.getCroppedCanvas();

               
                const croppedImageDataUrl = canvas.toDataURL();

               
                document.getElementById('cropped-image').src = croppedImageDataUrl;

               
                localStorage.setItem('croppedImage', croppedImageDataUrl);
            }
        });

        // Check if there's a stored cropped image and display it
        window.onload = function() {
            const storedImage = localStorage.getItem('croppedImage');
            if (storedImage) {
                document.getElementById('cropped-image').src = storedImage;
            }
        };
  






    </script>
</body>

</html>